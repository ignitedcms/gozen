<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Query builder</title>

      <link rel="stylesheet" href="/resources/css/output.css">
      <script src="/resources/js/vue2.js"></script>
      <style>
        #draggable-0 { width: 200px; height: 250px; padding: 0.5em; }
        #draggable-1 { width: 200px; height: 250px; padding: 0.5em; }
        #draggable-2 { width: 200px; height: 250px; padding: 0.5em; }
        #draggable-3 { width: 200px; height: 250px; padding: 0.5em; }
        .node-left{
           position:absolute;
           height:20px;
           width:20px;
           background-color:#fff;
           left:-30px;
           top:2px;
           border-radius:50px;
           border:solid 2px #038cfc;

        }
        .node-right{
           position:absolute;
           height:20px;
           width:20px;
           background-color:#fff;
           right:-30px;
           top:2px;
           border-radius:50px;
           border:solid 2px #038cfc;

        }
        .active {
           background-color: green !important;
         }
      </style>
      <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
      <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
      <script>
         $( function() {
            $( "#draggable-0" ).draggable({
                  drag: function() {
                       var offset = $(this).offset();
                       var xPos = offset.left;
                       var yPos = offset.top;
                       $('#x').text('x: ' + xPos);
                       $('#y').text('y: ' + yPos);
                   }
               });
            $( "#draggable-1" ).draggable();
            $( "#draggable-2" ).draggable();
            $( "#draggable-3" ).draggable();
         } );
      </script>
   </head>
<body class="p-8 bg-[--light-gray]">
   <div id="app">
   <div id="x"></div>
   <div id="y"></div>

   {{range $index, $item := .Data}}
   <div id="draggable-{{$index}}" class="bg-white border border-[--gray] rounded-md shadow-md cursor-pointer">
      <div class="">{{.Name}}</div>
      {{range .Columns}}
      <div class="relative">
         <div class="node-left" @click="alert('{{.}}')"></div>
         <div class="node-right" @click="change" :style="{backgroundColor:circle}"></div>
         <input type="checkbox" name="" class="form-check-input">
         <label for="the label">{{.}}</label>
      </div>
      {{end}}

   </div>
   {{end}}

   <pre class="code mt-4">
SELECT order.id, customers.customer_name
FROM orders
INNER JOIN customers ON orders.customer_id = customers.id;
   </pre>

   <div
      v-for="(div, index) in foo"
      :key="index"
      :class="{ 'active': selectedIndex === index }"
      @click="selectDiv(index)"
      style="background-color: white; padding: 10px; margin-bottom: 5px;"
    >
     [[ div.Name ]]
    </div>
 
 
   </div>
   <script> 
      var app = new Vue(
      {
         el: '#app',
         delimiters: ['[[', ']]'],
         data:{
            circle:'white',
            selectedIndex:null,
            foo:{{.Data}}
         },
         methods:
         {
            selectDiv(index) {
                this.selectedIndex = index;
            },
            change()
            {
               if(this.circle == 'white')
               {
                  this.circle = 'green'
               } 
               else
               {
                  this.circle = 'white'
               }
            }
         },
         mounted()
         {
         }
      });   
   </script> 
 
</body>
</html>
